{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a75d577a3143ea9e7842","webpack:///./js/talk-to-me-base.js","webpack:///./js/combine.js","webpack:///./js/talk-to-me-matcher.js","webpack:///./js/talk-to-me-conversate.js"],"names":[],"mappings":"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","file":"talk-to-me.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a75d577a3143ea9e7842\n **/","import { Combine } from './combine';\r\nimport { Matcher } from './talk-to-me-matcher';\r\nimport { Conversate } from './talk-to-me-conversate';\r\n\r\n\r\n// default error messages\r\nconst defaultNoSupportMessage = 'Sorry your browser doesn\\'t support speech recognition';\r\nconst nonCompatibleSpeechRecognitionEventError = 'Sorry the speech recognition API does not support this event';\r\nconst eventListenerNotFoundError = 'Sorry the listener you\\'re trying to remove isn\\'t currently active';\r\nconst noSpeechDetected = 'Sorry no speech detected!';\r\n\r\n// a reference to the bound result handler so it can be removed\r\nlet resultCallback;\r\n\r\nconst defaultNoSupportFunction = () => alert(defaultNoSupportMessage);\r\n\r\nconst isCompatibleSpeechRecognitionEvent = function(speechEvents, evt) {\r\n\treturn Object.keys(speechEvents).indexOf(evt) > -1;\r\n}\r\n\r\n\r\n/*\r\n *\tFires after each result has finished being analysed\r\n *\tSet the autoRestart property to true so it continues to listen\r\n *\totherwise you'll have to manually use the start method to begin listening again\t\r\n */\r\n\r\nconst onEnd = function() {\r\n\tif(this.autoRestart && this.isListening) {\r\n\t\tthis.start();\r\n\t}\r\n};\r\n\r\n\r\n/*\r\n *\tCycles through the event listeners stored and adds them to the instance\r\n *\tof the speech recognition constructor used at the heart of Talk To Me\r\n */\r\n\r\nconst addEventListeners = function() {\r\n\r\n\tObject.keys(this.eventListeners).forEach(listener => {\r\n\t\tlet handler = this.eventListeners[listener][0];\r\n\t\tif(handler) {\r\n\t\t\tthis.speech.addEventListener(listener, handler);\r\n\t\t}\t\t\t\r\n\t});\r\n\r\n}\r\n\r\nconst onError = function(e) {\r\n\tif(this.isListening) {\r\n\t\tif(e.error === 'no-speech') {\r\n\t\t\tconsole.warn(noSpeechDetected);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.throwWarning(e.error);\r\n\t\t}\t\r\n\t}\t\r\n}\r\n\r\n\r\n/*\r\n *\tThe ONLY result event listener added to the speech recognition instance\r\n *\tThis is because the event object the native API spits out is heavily modified\r\n *\tand stripped down to just the results and whether it's the last set of results\r\n *\tThis stripped down event object is then passed into each registered result callback\r\n *\twhich is bound so its context is the current instance of Talk To Me\r\n */\r\n\r\nconst onResult = function(event) {\r\n\r\n\tconst isFinalResult = event.results[0].isFinal;\r\n\tconst results = [].slice.call(event.results[0]);\r\n\r\n\tthis.eventListeners.result.forEach((listener, i) => {\r\n\t\tif(i !== 0 && this.isListening) {\r\n\t\t\tlistener.boundCallback({ isFinalResult, results });\r\n\t\t}\r\n\t});\r\n\r\n}\r\n\r\nexport class TalkToMe extends Combine(Matcher) {\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t// get the speech recognition constructor and test for support\r\n\t\tlet { speech, support } = TalkToMe.getSpeechRecogniserConstructor();\r\n\t\tthis.support = support;\r\n\r\n\t\tif(this.support) {\r\n\r\n\t\t\t/*\r\n\t\t\t *\tDefault options (optional)\r\n\t\t\t *\tSet against the instance of the speech recognition API\r\n\t\t\t *\tAnd the instance of Talk To Me\r\n\t\t\t */\r\n\r\n\t\t\tlet { numOfAlternativeMatches, language, finalResultsOnly } = options;\r\n\t\t\tfinalResultsOnly = typeof finalResultsOnly === 'undefined' ? false : !finalResultsOnly;\r\n\t\t\t\r\n\t\t\tthis.speech = new speech();\t\t\r\n\t\t\tthis.speech.maxAlternatives = numOfAlternativeMatches || 5;\r\n\t\t\tthis.speech.interimResults = finalResultsOnly;\r\n\t\t\tthis.speech.lang = language || 'en-US';\r\n\r\n\t\t\tthis.isListening = false;\r\n\t\t\tthis.autoRestart = false;\r\n\t\t\tthis.getFirstMatchOnly = true;\r\n\r\n\t\t\t// store a reference to the bound result callback\r\n\t\t\tresultCallback = onResult.bind(this);\r\n\r\n\t\t\t// default event listeners\r\n\t\t\tthis.eventListeners = {\r\n\t\t\t\tstart : [],\r\n\t\t\t\tend : [onEnd.bind(this)],\r\n\t\t\t\taudioend : [],\r\n\t\t\t\taudiostart : [],\r\n\t\t\t\terror : [onError.bind(this)],\r\n\t\t\t\tnomatch : [],\r\n\t\t\t\tresult : [resultCallback],\r\n\t\t\t\tsoundend : [],\r\n\t\t\t\tsoundstart : [],\r\n\t\t\t\tspeechend : [],\r\n\t\t\t\tspeechstart : []\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\taddEventListeners.call(this);\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.throwWarning('Sorry, no speech recognition ability found in this browser.');\r\n\t\t}\r\n\r\n\t}\t\r\n\r\n\t// modify the on no support handler\r\n\tonNoSupport(cb = defaultNoSupportFunction) {\r\n\t\tcb();\r\n\t}\r\n\r\n\r\n\t/*\r\n\t *\tTry / catch will prevent errors thrown if start is called when the\r\n\t *\tspeech recognition API has already started to listen.\r\n\t *\tLikewise for stop (see below method)\r\n\t */\r\n\r\n\tstart() {\r\n\t\tthis.isListening = true;\r\n\t\ttry {\r\n\t\t\tthis.speech.start();\r\n\t\t}\r\n\t\tcatch(e) {\r\n\t\t\tthis.throwWarning(e);\r\n\t\t}\t\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.isListening = false;\r\n\t\ttry {\r\n\t\t\tthis.speech.abort();\r\n\t\t}\r\n\t\tcatch(e) {\r\n\t\t\tthis.throwWarning(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t *\tAdd event listeners to the instance of the speech recognition API \r\n\t *\tStores a reference to the callback and the bound callback (binds the instance of Talk To Me to it)\r\n\t *\tNote: It will not allow more than one 'result' handler because of the way Talk To Me\r\n\t *\tmodifies the result event object and passes it into the registered callbacks\r\n\t */\r\n\r\n\ton(evt, callback) {\r\n\t\tif(isCompatibleSpeechRecognitionEvent(this.eventListeners, evt)) {\r\n\t\t\tlet boundCallback = callback.bind(this.speech);\r\n\t\t\tif(evt !== 'result') {\r\n\t\t\t\tthis.speech.addEventListener(evt, boundCallback);\r\n\t\t\t}\t\t\t\t\r\n\t\t\tthis.eventListeners[evt].push({ callback, boundCallback });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.throwWarning(nonCompatibleSpeechRecognitionEventError);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\t *\tRemoves event listeners from the instance of the speech recognition API \r\n\t *\tMatches the callback, not the bound one as externally there is no reference to it\r\n\t *\tThen removes the bound callback counterpart event listener\r\n\t *\tNote: if the penultimate result event listener is removed, Talk To Me's result listener\r\n\t *\tis also removed, a new instance of Talk To Me is created and the event listeners are re-registered\r\n\t */\r\n\r\n\toff(evt, callback) {\r\n\t\tif(isCompatibleSpeechRecognitionEvent(this.eventListeners, evt)) {\r\n\r\n\t\t\tlet indexOfCallback = this.eventListeners[evt].reduce((ioc, callbacks, i) => {\r\n\t\t\t\tif(callbacks.callback === callback) {\r\n\t\t\t\t\tioc = i;\r\n\t\t\t\t}\r\n\t\t\t\treturn ioc;\r\n\t\t\t}, -1);\r\n\r\n\t\t\tif(indexOfCallback > -1) {\r\n\t\t\t\tthis.speech.removeEventListener(evt, this.eventListeners[evt][indexOfCallback].boundCallback);\r\n\t\t\t\tthis.eventListeners[evt].splice(indexOfCallback, 1);\r\n\t\t\t}\t\r\n\t\t\telse {\r\n\t\t\t\tthis.throwWarning(eventListenerNotFoundError);\r\n\t\t\t}\t\r\n\r\n\t\t\tif(evt === 'result' && this.eventListeners.result.length === 1) {\r\n\t\t\t\t\r\n\t\t\t\tthis.speech.removeEventListener('result', resultCallback);\r\n\t\t\t\tlet { speech } = TalkToMe.getSpeechRecogniserConstructor();\r\n\t\t\t\tthis.speech = new speech();\r\n\t\t\t\taddEventListeners.call(this);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrowWarning(nonCompatibleSpeechRecognitionEventError);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthrowWarning(msg) {\r\n\t\tconsole.warn(msg);\t\r\n\t}\r\n\r\n\tstatic getSpeechRecogniserConstructor() {\r\n\t\tlet speech = window.SpeechRecognition ||\r\n\t\t\twindow.webkitSpeechRecognition ||\r\n\t\t\twindow.mozSpeechRecognition ||\r\n\t\t\twindow.msSpeechRecognition ||\r\n\t\t\twindow.oSpeechRecognition;\r\n\t\treturn { speech, support : !!speech }\r\n\t}\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./js/talk-to-me-base.js\n **/","export function Combine(...constructors) {\r\n\tlet combined = function() {};\r\n\tcombined.prototype = constructors.reduce(function(proto, constructor) {\r\n       \tObject.getOwnPropertyNames(constructor.prototype).forEach(function(key) {\r\n       \t\tif(key !== 'constructor') {\r\n       \t\t\tproto[key] = constructor.prototype[key];\r\n       \t\t}\t\t\t\r\n\t\t});\r\n\t\treturn proto;\r\n\t}, {});\t\r\n\treturn combined;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./js/combine.js\n **/","let hasFoundMatch = false;\r\nlet createSearches;\r\nlet onResultCallback;\r\n\r\nconst resultMatcher = function(evt) {\r\n\r\n\tlet { isFinalResult } = evt;\r\n\r\n\tif (!hasFoundMatch || !this.getFirstMatchOnly) {\r\n\t\tfindMatches.call(this, evt);\r\n\t}\t\r\n\telse if(hasFoundMatch) {\r\n\t\tresetFindMatches.call(this);\r\n\t}\r\n\t\r\n};\r\n\r\nconst resetFindMatches = function() {\r\n\r\n\tthis.off('result', onResultCallback);\r\n\tthis.searchForThese = emptyResults.call(this);\t\r\n\thasFoundMatch = false;\r\n\tthis.on('result', onResultCallback);\t\r\n\r\n};\r\n\r\nconst createSearchObject = function(searches, search) {\r\n\r\n\tlet regex = search.lastIndexOf('s') === search.length - 1 ? `${search}?` : search;\r\n\tregex = new RegExp(`${regex}`, 'i');\r\n\r\n\treturn {\r\n\t\tterm : search,\r\n\t\tresults : [],\r\n\t\tcallback : searches[search],\r\n\t\tcallbackUsed : false,\r\n\t\tregex : regex\r\n\t};\r\n\r\n};\r\n\r\nconst addToSearch = function() {\r\n\r\n\tlet records = {};\r\n\treturn searches => {\r\n\t\tObject.keys(searches).forEach(search => {\r\n\t\t\tif(!records[search]) {\r\n\t\t\t\trecords[search] = createSearchObject(searches, search);\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t\treturn records;\r\n\t}\r\n\r\n}\r\n\r\nconst findMatches = function(evt) {\r\n\r\n\tlet { results, isFinalResult } = evt;\r\n\r\n\tif(!hasFoundMatch) {\r\n\t\tfindMatch.call(this, evt);\r\n\t}\r\n\telse if(!this.getFirstMatchOnly) {\r\n\t\tfindMatch.call(this, evt);\r\n\t}\r\n\r\n\tif(isFinalResult) {\r\n\t\tif(hasFoundMatch) {\r\n\t\t\tresetFindMatches.call(this);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.noMatchFound();\r\n\t\t}\t\t\r\n\t}\r\n\r\n};\r\n\r\nconst findMatch = function(evt) {\r\n\t\r\n\tthis.searchForThese = Object.assign({}, searchText.call(this, evt));\r\n\tfireResults.call(this, evt.isFinalResult);\t\r\n\r\n};\r\n\r\nconst searchText = function(evt) {\r\n\r\n\treturn Object.keys(this.searchForThese).reduce((results, key) => {\r\n\r\n\t\tlet match = evt.results.filter(result => {\r\n\t\t\treturn result.transcript.match(results[key].regex);\r\n\t\t});\r\n\r\n\t\tif(match.length) {\r\n\t\t\tresults[key].results = results[key].results.concat(match[0]);\r\n\t\t\thasFoundMatch = true;\r\n\t\t}\t\r\n\r\n\t\treturn results;\r\n\r\n\t}, this.searchForThese);\r\n\r\n};\r\n\r\nconst fireResults = function(isFinalResult) {\r\n\r\n\tObject.keys(this.searchForThese).forEach(key => {\r\n\r\n\t\tlet { results, callbackUsed } = this.searchForThese[key];\r\n\r\n\t\tif(results.length && !callbackUsed) {\r\n\r\n\t\t\tlet { term, results } = this.searchForThese[key];\r\n\r\n\t\t\tthis.searchForThese[key].callbackUsed = true;\r\n\t\t\tthis.searchForThese[key].callback.call(this, { \r\n\t\t\t\tterm, \r\n\t\t\t\tresults, \r\n\t\t\t\tisFinalResult\r\n\t\t\t});\t\t\t\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n}\r\n\r\nconst emptyResults = function() {\r\n\r\n\treturn Object.keys(this.searchForThese).reduce((searchForThese, key) => {\r\n\r\n\t\tsearchForThese[key] = Object.assign({}, this.searchForThese[key], {\r\n\t\t\tresults : [],\r\n\t\t\tcallbackUsed : false\r\n\t\t});\r\n\r\n\t\treturn searchForThese;\r\n\r\n\t}, {});\r\n\r\n};\r\n\r\nconst noMatch = function() {\r\n\tthis.throwWarning('Sorry no matches found, try again?');\r\n}; \r\n\r\nexport class Matcher {\r\n\r\n\tmatch(searches = {}) {\r\n\t\tif(typeof searches !== 'object' || !Object.keys(searches).length){\r\n\t\t\tthis.throwWarning('match expects an object with a key term and a callback value.');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!this.searchForThese) {\r\n\t\t\tcreateSearches = addToSearch();\r\n\t\t\tonResultCallback = resultMatcher.bind(this);\r\n\t\t\tthis.on('result', onResultCallback);\r\n\t\t}\r\n\t\t\r\n\t\tthis.searchForThese = createSearches(searches);\r\n\t\t\r\n\t\tif(!this.noMatchFound) {\r\n\t\t\tthis.onNoMatch();\r\n\t\t}\t\r\n\t}\r\n\r\n\tonNoMatch(callback = noMatch) {\r\n\t\tthis.noMatchFound = callback.bind(this);\r\n\t}\r\n\r\n\tremoveMatchTerm(term) {\r\n\t\tdelete this.searchForThese[term];\t\r\n\t}\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./js/talk-to-me-matcher.js\n **/","let conversation = [];\r\n\r\nexport class Conversate {\r\n\tconversate(matches) {\r\n\t\t// this.getFirstMatchOnly = false;\r\n\t\tthis.match(matches);\r\n\t}\r\n}\r\n\r\n// const createSearch = function() {\r\n// \treturn new RegExp(this.searchFor.reduce((text, term, i) => {\r\n// \t\tif(i > 0) {\r\n// \t\t\ttext += '|';\r\n// \t\t}\r\n// \t\ttext += `${Object.keys(term)[0]}s?`;\r\n// \t\treturn text;\r\n// \t}, ''), 'i');\r\n// }\r\n\r\n/*\r\n\r\ntop level object\r\n\r\n{\r\n\tdepth : 1 // the amount of questions\r\n\tquestions : [{\r\n\t\tquestion : 'What would you like to shop for?',\r\n\t\tanswers : {\r\n\t\t\tname : ['washing machine', 'TVs']\r\n\t\t\tverbs : [\r\n\t\t\t\t{\r\n\t\t\t\t\tpronoun : 'you',\r\n\t\t\t\t\tverb : 'show'\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\tpronoun : 'you',\r\n\t\t\t\t\tverb : ['info', 'information']\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tonMatch : function(evt) {\r\n\t\t\t\tconsole.log('Do you want us to ${verb} ${pronoun} ${results} or ')\t\r\n\t\t\t}\r\n\t\t}\r\n\t}]\r\n}\r\n\r\n\r\n\r\n\r\n*/\n\n\n/** WEBPACK FOOTER **\n ** ./js/talk-to-me-conversate.js\n **/"],"sourceRoot":""}